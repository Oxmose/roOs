<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UTK - Utility Kernel: Source/Kernel/Time/includes/time_mgt.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UTK - Utility Kernel
   &#160;<span id="projectnumber">ver. 0.1</span>
   </div>
   <div id="projectbrief">Utility Kernel</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_74389ed8173ad57b461b9d623a1f3867.html">Source</a></li><li class="navelem"><a class="el" href="dir_6130151139ac5df9513b64611b721a4c.html">Kernel</a></li><li class="navelem"><a class="el" href="dir_0135b5a9d7bcce40541f370f854b81ad.html">Time</a></li><li class="navelem"><a class="el" href="dir_0dd4e9c3f312a472b2ba22da4c6658d4.html">includes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">time_mgt.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stddef_8h_source.html">stddef.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ctrl__block_8h_source.html">ctrl_block.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for time_mgt.h:</div>
<div class="dyncontent">
<div class="center"><img src="time__mgt_8h__incl.png" border="0" usemap="#a_source_2_kernel_2_time_2includes_2time__mgt_8h" alt=""/></div>
<map name="a_source_2_kernel_2_time_2includes_2time__mgt_8h" id="a_source_2_kernel_2_time_2includes_2time__mgt_8h">
<area shape="rect" title=" " alt="" coords="160,5,319,47"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="152,319,223,345"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="91,95,166,121"/>
<area shape="rect" href="ctrl__block_8h.html" title=" " alt="" coords="191,95,288,121"/>
<area shape="rect" href="config_8h.html" title=" " alt="" coords="28,169,101,196"/>
<area shape="rect" href="tracing_8h.html" title=" " alt="" coords="25,244,104,271"/>
<area shape="rect" href="trace__events_8h.html" title=" " alt="" coords="5,319,124,345"/>
<area shape="rect" title=" " alt="" coords="231,169,288,196"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="time__mgt_8h__dep__incl.png" border="0" usemap="#a_source_2_kernel_2_time_2includes_2time__mgt_8hdep" alt=""/></div>
<map name="a_source_2_kernel_2_time_2includes_2time__mgt_8hdep" id="a_source_2_kernel_2_time_2includes_2time__mgt_8hdep">
<area shape="rect" title=" " alt="" coords="469,5,627,47"/>
<area shape="rect" href="pit_8h.html" title=" " alt="" coords="327,95,510,136"/>
<area shape="rect" href="kickstart_8c.html" title=" " alt="" coords="5,184,192,225"/>
<area shape="rect" href="pit_8c.html" title=" " alt="" coords="431,184,577,225"/>
<area shape="rect" href="rtc_8h.html" title=" " alt="" coords="69,95,251,136"/>
<area shape="rect" href="rtc_8c.html" title=" " alt="" coords="216,184,363,225"/>
<area shape="rect" href="i386_2src_2panic_8c.html" title=" " alt="" coords="586,95,745,136"/>
<area shape="rect" href="x86__64_2src_2panic_8c.html" title=" " alt="" coords="769,95,946,136"/>
<area shape="rect" href="kernel__output_8c.html" title=" " alt="" coords="971,95,1123,136"/>
<area shape="rect" href="time__mgt_8c.html" title=" " alt="" coords="1147,95,1295,136"/>
</map>
</div>
</div>
<p><a href="time__mgt_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkernel__timer__t.html">kernel_timer_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The kernel's timer driver abstraction.  <a href="structkernel__timer__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaf9529f5524bee8b592d398036613af8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__mgt_8h.html#aaf9529f5524bee8b592d398036613af8">time_init</a> (const <a class="el" href="structkernel__timer__t.html">kernel_timer_t</a> *sys_timer, const <a class="el" href="structkernel__timer__t.html">kernel_timer_t</a> *rtc_timer)</td></tr>
<tr class="memdesc:aaf9529f5524bee8b592d398036613af8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the time manager.  <a href="time__mgt_8h.html#aaf9529f5524bee8b592d398036613af8">More...</a><br /></td></tr>
<tr class="separator:aaf9529f5524bee8b592d398036613af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe409bc6f9cb0cca020d9b10c507f02e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__mgt_8h.html#afe409bc6f9cb0cca020d9b10c507f02e">time_get_current_uptime</a> (void)</td></tr>
<tr class="memdesc:afe409bc6f9cb0cca020d9b10c507f02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current uptime.  <a href="time__mgt_8h.html#afe409bc6f9cb0cca020d9b10c507f02e">More...</a><br /></td></tr>
<tr class="separator:afe409bc6f9cb0cca020d9b10c507f02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa157b1913c95e0e028a8ed76802ca145"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__mgt_8h.html#aa157b1913c95e0e028a8ed76802ca145">time_get_tick_count</a> (void)</td></tr>
<tr class="memdesc:aa157b1913c95e0e028a8ed76802ca145"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of system's ticks since the system started.  <a href="time__mgt_8h.html#aa157b1913c95e0e028a8ed76802ca145">More...</a><br /></td></tr>
<tr class="separator:aa157b1913c95e0e028a8ed76802ca145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47f159ce8e7bdb7ed6678e3b9d76172"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__mgt_8h.html#aa47f159ce8e7bdb7ed6678e3b9d76172">time_wait_no_sched</a> (const <a class="el" href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> ns)</td></tr>
<tr class="memdesc:aa47f159ce8e7bdb7ed6678e3b9d76172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait for ms nanoseconds.  <a href="time__mgt_8h.html#aa47f159ce8e7bdb7ed6678e3b9d76172">More...</a><br /></td></tr>
<tr class="separator:aa47f159ce8e7bdb7ed6678e3b9d76172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945a623ee70ed374e56b628ed6b9f7dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__mgt_8h.html#a945a623ee70ed374e56b628ed6b9f7dc">time_register_scheduler</a> (void(*scheduler_call)(<a class="el" href="structkernel__thread__t.html">kernel_thread_t</a> *))</td></tr>
<tr class="memdesc:a945a623ee70ed374e56b628ed6b9f7dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers the function to call the system's scheduler.  <a href="time__mgt_8h.html#a945a623ee70ed374e56b628ed6b9f7dc">More...</a><br /></td></tr>
<tr class="separator:a945a623ee70ed374e56b628ed6b9f7dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61b9d5bf4b49fac93643ab0ee02bbccd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__mgt_8h.html#a61b9d5bf4b49fac93643ab0ee02bbccd">time_register_rtc_manager</a> (void(*rtc_manager)(void))</td></tr>
<tr class="memdesc:a61b9d5bf4b49fac93643ab0ee02bbccd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers the function to call the RTC manager.  <a href="time__mgt_8h.html#a61b9d5bf4b49fac93643ab0ee02bbccd">More...</a><br /></td></tr>
<tr class="separator:a61b9d5bf4b49fac93643ab0ee02bbccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="afe409bc6f9cb0cca020d9b10c507f02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe409bc6f9cb0cca020d9b10c507f02e">&#9670;&nbsp;</a></span>time_get_current_uptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> time_get_current_uptime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current uptime. </p>
<p>Return the current uptime of the system in ns.</p>
<dl class="section return"><dt>Returns</dt><dd>The current uptime in ns. </dd></dl>

<p class="definition">Definition at line <a class="el" href="time__mgt_8c_source.html#l00302">302</a> of file <a class="el" href="time__mgt_8c_source.html">time_mgt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#a1d8c49ce36a788deb7e110924deba871">get_time_ns</a> == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#afa55b60b206da841562e9639fd5a72ba">get_frequency</a> == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="time__mgt_8c.html#a3dacdc653bc8307efbbf4ef68a5959d6">sys_tick_count</a> * 1000000000ULL / <a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#afa55b60b206da841562e9639fd5a72ba">get_frequency</a>();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#a1d8c49ce36a788deb7e110924deba871">get_time_ns</a>();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
<div class="ttc" id="astddef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">UTK's NULL definition.</div><div class="ttdef"><b>Definition:</b> <a href="stddef_8h_source.html#l00032">stddef.h:32</a></div></div>
<div class="ttc" id="astructkernel__timer__t_html_a1d8c49ce36a788deb7e110924deba871"><div class="ttname"><a href="structkernel__timer__t.html#a1d8c49ce36a788deb7e110924deba871">kernel_timer_t::get_time_ns</a></div><div class="ttdeci">uint64_t(* get_time_ns)(void)</div><div class="ttdoc">Returns the time elasped since the last timer's reset in ns.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8h_source.html#l00077">time_mgt.h:77</a></div></div>
<div class="ttc" id="astructkernel__timer__t_html_afa55b60b206da841562e9639fd5a72ba"><div class="ttname"><a href="structkernel__timer__t.html#afa55b60b206da841562e9639fd5a72ba">kernel_timer_t::get_frequency</a></div><div class="ttdeci">uint32_t(* get_frequency)(void)</div><div class="ttdoc">The function should return the frequency of the timer source.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8h_source.html#l00056">time_mgt.h:56</a></div></div>
<div class="ttc" id="atime__mgt_8c_html_a3dacdc653bc8307efbbf4ef68a5959d6"><div class="ttname"><a href="time__mgt_8c.html#a3dacdc653bc8307efbbf4ef68a5959d6">sys_tick_count</a></div><div class="ttdeci">static uint64_t sys_tick_count</div><div class="ttdoc">Stores the number of main kernel's timer tick since the initialization of the time manager.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00072">time_mgt.c:72</a></div></div>
<div class="ttc" id="atime__mgt_8c_html_afc008d843f654d7245e4284e1941e16f"><div class="ttname"><a href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a></div><div class="ttdeci">static kernel_timer_t sys_main_timer</div><div class="ttdoc">The kernel's main timer interrupt source.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00079">time_mgt.c:79</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="time__mgt_8h_afe409bc6f9cb0cca020d9b10c507f02e_icgraph.png" border="0" usemap="#atime__mgt_8h_afe409bc6f9cb0cca020d9b10c507f02e_icgraph" alt=""/></div>
<map name="atime__mgt_8h_afe409bc6f9cb0cca020d9b10c507f02e_icgraph" id="atime__mgt_8h_afe409bc6f9cb0cca020d9b10c507f02e_icgraph">
<area shape="rect" title="Returns the current uptime." alt="" coords="523,31,709,57"/>
<area shape="rect" href="kernel__output_8h.html#abd40dbd84fff119a9a4385da8360441e" title="Prints the desired string to the screen." alt="" coords="363,5,473,32"/>
<area shape="rect" href="i386_2includes_2panic_8h.html#ab321ec2a0169f75f3384243e99f32c94" title="Displays the kernel panic screen." alt="" coords="361,56,475,83"/>
<area shape="rect" href="interrupts_8h.html#ad09692ab615f14b26f0ff7fe7d4b017e" title="Kernel&#39;s main interrupt handler." alt="" coords="132,31,313,57"/>
<area shape="rect" href="interrupts_8h.html#acbc11e0977ede8062ce000240adad2f5" title="Initializes the kernel&#39;s interrupt manager." alt="" coords="146,81,299,108"/>
<area shape="rect" href="kickstart_8c.html#aa7661ce522787aa8be0fa9c027f8f557" title="Main boot sequence, C kernel entry point." alt="" coords="5,81,84,108"/>
</map>
</div>

</div>
</div>
<a id="aa157b1913c95e0e028a8ed76802ca145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa157b1913c95e0e028a8ed76802ca145">&#9670;&nbsp;</a></span>time_get_tick_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> time_get_tick_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of system's ticks since the system started. </p>
<p>Returns the number of system's ticks since the system started.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of system's ticks since the system started. </dd></dl>

<p class="definition">Definition at line <a class="el" href="time__mgt_8c_source.html#l00317">317</a> of file <a class="el" href="time__mgt_8c_source.html">time_mgt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;{</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_GET_TICK_COUNT, 2,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                       (<a class="code" href="stdint_8h.html#a324c5d28c0d82f502a234ab99efac87a">uint32_t</a>)<a class="code" href="time__mgt_8c.html#a3dacdc653bc8307efbbf4ef68a5959d6">sys_tick_count</a>,</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                       (<a class="code" href="stdint_8h.html#a324c5d28c0d82f502a234ab99efac87a">uint32_t</a>)(<a class="code" href="time__mgt_8c.html#a3dacdc653bc8307efbbf4ef68a5959d6">sys_tick_count</a> &gt;&gt; 32));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="time__mgt_8c.html#a3dacdc653bc8307efbbf4ef68a5959d6">sys_tick_count</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="ttc" id="astdint_8h_html_a324c5d28c0d82f502a234ab99efac87a"><div class="ttname"><a href="stdint_8h.html#a324c5d28c0d82f502a234ab99efac87a">uint32_t</a></div><div class="ttdeci">unsigned uint32_t</div><div class="ttdoc">Defines uint32_t type as an exact width 32 bits integer.</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00093">stdint.h:93</a></div></div>
<div class="ttc" id="atracing_8h_html_a631034fc8d54090aa7f8fca47f5f4d58"><div class="ttname"><a href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a></div><div class="ttdeci">#define KERNEL_TRACE_EVENT(...)</div><div class="ttdef"><b>Definition:</b> <a href="tracing_8h_source.html#l00061">tracing.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf9529f5524bee8b592d398036613af8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf9529f5524bee8b592d398036613af8">&#9670;&nbsp;</a></span>time_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a> time_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkernel__timer__t.html">kernel_timer_t</a> *&#160;</td>
          <td class="paramname"><em>sys_timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structkernel__timer__t.html">kernel_timer_t</a> *&#160;</td>
          <td class="paramname"><em>rtc_timer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the time manager. </p>
<p>Initializes the kernel's time manager. Set the basic time structures and interrupts. The rtc and aux timer drivers can be set to NULL but the main driver has to be fully set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sys_timer</td><td>The system's main timer driver. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rtc_timer</td><td>The RTC timer driver.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>All the interrupt managers and timer sources drivers must be initialized before using this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The success state or the error code.<ul>
<li>OS_NO_ERR is returned if no error is encountered.</li>
<li>OS_ERR_NULL_POINTER if the main timer driver is NULL or has NULL function pointers. This value is also returned is the RTC or AUX driver is not NULL but contains NULL function pointers.</li>
<li>OS_ERR_NO_SUCH_IRQ_LINE is returned if the IRQ number of the kernel timers sources are not supported.</li>
<li>OR_ERR_UNAUTHORIZED_INTERRUPT_LINE is returned if the interrupt lines of the kernel timers sources are not supported. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="time__mgt_8c_source.html#l00198">198</a> of file <a class="el" href="time__mgt_8c_source.html">time_mgt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a> err;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#ifdef ARCH_64_BITS</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_INIT_TIME_MGT_START, 4,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                       (uintptr_t)main_timer &amp; 0xFFFFFFFF,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                       (uintptr_t)main_timer &gt;&gt; 32,</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                       (uintptr_t)rtc_timer &amp; 0xFFFFFFFF,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                       (uintptr_t)rtc_timer &gt;&gt; 32);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_INIT_TIME_MGT_START, 4,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                       (uintptr_t)main_timer &amp; 0xFFFFFFFF,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                       (uintptr_t)0,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                       (uintptr_t)rtc_timer &amp; 0xFFFFFFFF,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                       (uintptr_t)0);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">/* Check the main timer integrity */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span>(main_timer == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;       main_timer-&gt;get_frequency == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;       main_timer-&gt;set_frequency == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;       main_timer-&gt;enable == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;       main_timer-&gt;disable == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;       main_timer-&gt;set_handler == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;       main_timer-&gt;remove_handler == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;       main_timer-&gt;get_irq == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a8177a51adc2ead06e58edc0efd4ec20e">OS_ERR_NULL_POINTER</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a> = *main_timer;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">/* Check the rtc timer integrity */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span>(rtc_timer != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span>(rtc_timer-&gt;get_frequency != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;           rtc_timer-&gt;set_frequency != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;           rtc_timer-&gt;enable != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;           rtc_timer-&gt;disable != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;           rtc_timer-&gt;set_handler != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;           rtc_timer-&gt;remove_handler != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;           rtc_timer-&gt;get_irq != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <a class="code" href="time__mgt_8c.html#a7eaf53f665cf4fd9bf6b29156be82f8e">sys_rtc_timer</a> = *rtc_timer;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a8177a51adc2ead06e58edc0efd4ec20e">OS_ERR_NULL_POINTER</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="kernel__output_8h.html#ad5a087734220dd655d1effaa240275fa">KERNEL_DEBUG</a>(<a class="code" href="config_8h.html#a479e37962e8b24b96a6b3a88ddeffc71">TIME_MGT_DEBUG_ENABLED</a>,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                 <a class="code" href="time__mgt_8c.html#a14ded244c47bbba850a8a4be6d16c7e3">MODULE_NAME</a>,</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                 <span class="stringliteral">&quot;Time manager Initialization&quot;</span>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">/* Init the system&#39;s values */</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="time__mgt_8c.html#a3dacdc653bc8307efbbf4ef68a5959d6">sys_tick_count</a> = 0;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="time__mgt_8c.html#a9f0cde210aef708f2d76688cbea7a36f">active_wait</a>    = 0;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">/* Sets all the possible timer interrutps */</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#a4401019fba9f88fafc38b715b93cd0bf">set_time_ns</a> != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#a4401019fba9f88fafc38b715b93cd0bf">set_time_ns</a>(0);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#a57bbd4342e5c1bd4760a5c41dd18ce22">set_frequency</a>(<a class="code" href="config_8h.html#a46f3125cc05ea27d4880116f4a0a8744">KERNEL_MAIN_TIMER_FREQ</a>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    err = <a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#a3bd7494c8b959d5a3f0bc72af8b1c19b">set_handler</a>(<a class="code" href="time__mgt_8c.html#ab7d6a0fbc02fedb43eb4b98f75ab5c86">_time_main_timer_handler</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span>(err != <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a188fd154c7a72b48eaeac6b03930c186">OS_NO_ERR</a>)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="kernel__output_8h.html#ad5a087734220dd655d1effaa240275fa">KERNEL_DEBUG</a>(<a class="code" href="config_8h.html#a479e37962e8b24b96a6b3a88ddeffc71">TIME_MGT_DEBUG_ENABLED</a>,</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                 <a class="code" href="time__mgt_8c.html#a14ded244c47bbba850a8a4be6d16c7e3">MODULE_NAME</a>,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                 <span class="stringliteral">&quot;Initialized main timer&quot;</span>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="time__mgt_8c.html#a7eaf53f665cf4fd9bf6b29156be82f8e">sys_rtc_timer</a>.<a class="code" href="structkernel__timer__t.html#a57bbd4342e5c1bd4760a5c41dd18ce22">set_frequency</a> != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="time__mgt_8c.html#a7eaf53f665cf4fd9bf6b29156be82f8e">sys_rtc_timer</a>.<a class="code" href="structkernel__timer__t.html#a57bbd4342e5c1bd4760a5c41dd18ce22">set_frequency</a>(<a class="code" href="config_8h.html#aba1cad844ee443b46e15899ba48fe271">KERNEL_RTC_TIMER_FREQ</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        err = <a class="code" href="time__mgt_8c.html#a7eaf53f665cf4fd9bf6b29156be82f8e">sys_rtc_timer</a>.<a class="code" href="structkernel__timer__t.html#a3bd7494c8b959d5a3f0bc72af8b1c19b">set_handler</a>(<a class="code" href="time__mgt_8c.html#aec9de6a0ce157565ee3360d333147033">_time_rtc_timer_handler</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span>(err != <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a188fd154c7a72b48eaeac6b03930c186">OS_NO_ERR</a>)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="kernel__output_8h.html#ad5a087734220dd655d1effaa240275fa">KERNEL_DEBUG</a>(<a class="code" href="config_8h.html#a479e37962e8b24b96a6b3a88ddeffc71">TIME_MGT_DEBUG_ENABLED</a>,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                 <a class="code" href="time__mgt_8c.html#a14ded244c47bbba850a8a4be6d16c7e3">MODULE_NAME</a>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                 <span class="stringliteral">&quot;Initialized RTC timer&quot;</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">/* Enables all the possible timers */</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="time__mgt_8c.html#afc008d843f654d7245e4284e1941e16f">sys_main_timer</a>.<a class="code" href="structkernel__timer__t.html#a1642c82ad61ded45b6a55d568274bc10">enable</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="time__mgt_8c.html#a7eaf53f665cf4fd9bf6b29156be82f8e">sys_rtc_timer</a>.<a class="code" href="structkernel__timer__t.html#a57bbd4342e5c1bd4760a5c41dd18ce22">set_frequency</a> != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="time__mgt_8c.html#a7eaf53f665cf4fd9bf6b29156be82f8e">sys_rtc_timer</a>.<a class="code" href="structkernel__timer__t.html#a1642c82ad61ded45b6a55d568274bc10">enable</a>();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_INIT_TIME_MGT_END, 0);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a188fd154c7a72b48eaeac6b03930c186">OS_NO_ERR</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
<div class="ttc" id="aconfig_8h_html_a46f3125cc05ea27d4880116f4a0a8744"><div class="ttname"><a href="config_8h.html#a46f3125cc05ea27d4880116f4a0a8744">KERNEL_MAIN_TIMER_FREQ</a></div><div class="ttdeci">#define KERNEL_MAIN_TIMER_FREQ</div><div class="ttdoc">System's main timer interrupt frequency.</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00061">config.h:61</a></div></div>
<div class="ttc" id="aconfig_8h_html_a479e37962e8b24b96a6b3a88ddeffc71"><div class="ttname"><a href="config_8h.html#a479e37962e8b24b96a6b3a88ddeffc71">TIME_MGT_DEBUG_ENABLED</a></div><div class="ttdeci">#define TIME_MGT_DEBUG_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00093">config.h:93</a></div></div>
<div class="ttc" id="aconfig_8h_html_aba1cad844ee443b46e15899ba48fe271"><div class="ttname"><a href="config_8h.html#aba1cad844ee443b46e15899ba48fe271">KERNEL_RTC_TIMER_FREQ</a></div><div class="ttdeci">#define KERNEL_RTC_TIMER_FREQ</div><div class="ttdoc">System's RTC interrupt frequency.</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00064">config.h:64</a></div></div>
<div class="ttc" id="akernel__output_8h_html_ad5a087734220dd655d1effaa240275fa"><div class="ttname"><a href="kernel__output_8h.html#ad5a087734220dd655d1effaa240275fa">KERNEL_DEBUG</a></div><div class="ttdeci">#define KERNEL_DEBUG(ENABLED, MODULE, STR,...)</div><div class="ttdef"><b>Definition:</b> <a href="kernel__output_8h_source.html#l00063">kernel_output.h:63</a></div></div>
<div class="ttc" id="akerror_8h_html_a51557cb52bbb9ee9d55aab5b9b16c3d0"><div class="ttname"><a href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a></div><div class="ttdeci">OS_RETURN_E</div><div class="ttdoc">System return states enumeration.</div><div class="ttdef"><b>Definition:</b> <a href="kerror_8h_source.html#l00037">kerror.h:38</a></div></div>
<div class="ttc" id="akerror_8h_html_a51557cb52bbb9ee9d55aab5b9b16c3d0a188fd154c7a72b48eaeac6b03930c186"><div class="ttname"><a href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a188fd154c7a72b48eaeac6b03930c186">OS_NO_ERR</a></div><div class="ttdeci">@ OS_NO_ERR</div><div class="ttdoc">No error occured.</div><div class="ttdef"><b>Definition:</b> <a href="kerror_8h_source.html#l00040">kerror.h:40</a></div></div>
<div class="ttc" id="akerror_8h_html_a51557cb52bbb9ee9d55aab5b9b16c3d0a8177a51adc2ead06e58edc0efd4ec20e"><div class="ttname"><a href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a8177a51adc2ead06e58edc0efd4ec20e">OS_ERR_NULL_POINTER</a></div><div class="ttdeci">@ OS_ERR_NULL_POINTER</div><div class="ttdoc">A null pointer was detected.</div><div class="ttdef"><b>Definition:</b> <a href="kerror_8h_source.html#l00042">kerror.h:42</a></div></div>
<div class="ttc" id="astructkernel__timer__t_html_a1642c82ad61ded45b6a55d568274bc10"><div class="ttname"><a href="structkernel__timer__t.html#a1642c82ad61ded45b6a55d568274bc10">kernel_timer_t::enable</a></div><div class="ttdeci">void(* enable)(void)</div><div class="ttdoc">The function should enable the timer's interrupt.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8h_source.html#l00094">time_mgt.h:94</a></div></div>
<div class="ttc" id="astructkernel__timer__t_html_a3bd7494c8b959d5a3f0bc72af8b1c19b"><div class="ttname"><a href="structkernel__timer__t.html#a3bd7494c8b959d5a3f0bc72af8b1c19b">kernel_timer_t::set_handler</a></div><div class="ttdeci">OS_RETURN_E(* set_handler)(void(*handler)(kernel_thread_t *))</div><div class="ttdoc">The function should set the timer's tick handler.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8h_source.html#l00120">time_mgt.h:120</a></div></div>
<div class="ttc" id="astructkernel__timer__t_html_a4401019fba9f88fafc38b715b93cd0bf"><div class="ttname"><a href="structkernel__timer__t.html#a4401019fba9f88fafc38b715b93cd0bf">kernel_timer_t::set_time_ns</a></div><div class="ttdeci">void(* set_time_ns)(const uint64_t time_ns)</div><div class="ttdoc">Sets the time elasped in ns.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8h_source.html#l00087">time_mgt.h:87</a></div></div>
<div class="ttc" id="astructkernel__timer__t_html_a57bbd4342e5c1bd4760a5c41dd18ce22"><div class="ttname"><a href="structkernel__timer__t.html#a57bbd4342e5c1bd4760a5c41dd18ce22">kernel_timer_t::set_frequency</a></div><div class="ttdeci">void(* set_frequency)(const uint32_t frequency)</div><div class="ttdoc">The function should allow the kernel to set the frequency of a timer source.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8h_source.html#l00067">time_mgt.h:67</a></div></div>
<div class="ttc" id="atime__mgt_8c_html_a14ded244c47bbba850a8a4be6d16c7e3"><div class="ttname"><a href="time__mgt_8c.html#a14ded244c47bbba850a8a4be6d16c7e3">MODULE_NAME</a></div><div class="ttdeci">#define MODULE_NAME</div><div class="ttdoc">Current module name.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00044">time_mgt.c:44</a></div></div>
<div class="ttc" id="atime__mgt_8c_html_a7eaf53f665cf4fd9bf6b29156be82f8e"><div class="ttname"><a href="time__mgt_8c.html#a7eaf53f665cf4fd9bf6b29156be82f8e">sys_rtc_timer</a></div><div class="ttdeci">static kernel_timer_t sys_rtc_timer</div><div class="ttdoc">The kernel's RTC timer interrupt source.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00096">time_mgt.c:96</a></div></div>
<div class="ttc" id="atime__mgt_8c_html_a9f0cde210aef708f2d76688cbea7a36f"><div class="ttname"><a href="time__mgt_8c.html#a9f0cde210aef708f2d76688cbea7a36f">active_wait</a></div><div class="ttdeci">static volatile uint64_t active_wait</div><div class="ttdoc">Active wait counter per CPU.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00109">time_mgt.c:109</a></div></div>
<div class="ttc" id="atime__mgt_8c_html_ab7d6a0fbc02fedb43eb4b98f75ab5c86"><div class="ttname"><a href="time__mgt_8c.html#ab7d6a0fbc02fedb43eb4b98f75ab5c86">_time_main_timer_handler</a></div><div class="ttdeci">static void _time_main_timer_handler(kernel_thread_t *curr_thread)</div><div class="ttdoc">The kernel's main timer interrupt handler.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00145">time_mgt.c:145</a></div></div>
<div class="ttc" id="atime__mgt_8c_html_aec9de6a0ce157565ee3360d333147033"><div class="ttname"><a href="time__mgt_8c.html#aec9de6a0ce157565ee3360d333147033">_time_rtc_timer_handler</a></div><div class="ttdeci">static void _time_rtc_timer_handler(kernel_thread_t *curr_thread)</div><div class="ttdoc">The kernel's RTC timer interrupt handler.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00179">time_mgt.c:179</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="time__mgt_8h_aaf9529f5524bee8b592d398036613af8_cgraph.png" border="0" usemap="#atime__mgt_8h_aaf9529f5524bee8b592d398036613af8_cgraph" alt=""/></div>
<map name="atime__mgt_8h_aaf9529f5524bee8b592d398036613af8_cgraph" id="atime__mgt_8h_aaf9529f5524bee8b592d398036613af8_cgraph">
<area shape="rect" title="Initializes the time manager." alt="" coords="5,31,85,57"/>
<area shape="rect" href="time__mgt_8c.html#ab7d6a0fbc02fedb43eb4b98f75ab5c86" title="The kernel&#39;s main timer interrupt handler." alt="" coords="133,5,331,32"/>
<area shape="rect" href="time__mgt_8c.html#aec9de6a0ce157565ee3360d333147033" title="The kernel&#39;s RTC timer interrupt handler." alt="" coords="141,56,323,83"/>
<area shape="rect" href="interrupts_8h.html#ac6f6186f6d894f59979a8afbd844bba3" title="Acknowleges an IRQ." alt="" coords="379,23,531,65"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="time__mgt_8h_aaf9529f5524bee8b592d398036613af8_icgraph.png" border="0" usemap="#atime__mgt_8h_aaf9529f5524bee8b592d398036613af8_icgraph" alt=""/></div>
<map name="atime__mgt_8h_aaf9529f5524bee8b592d398036613af8_icgraph" id="atime__mgt_8h_aaf9529f5524bee8b592d398036613af8_icgraph">
<area shape="rect" title="Initializes the time manager." alt="" coords="132,5,212,32"/>
<area shape="rect" href="kickstart_8c.html#aa7661ce522787aa8be0fa9c027f8f557" title="Main boot sequence, C kernel entry point." alt="" coords="5,5,84,32"/>
</map>
</div>

</div>
</div>
<a id="a61b9d5bf4b49fac93643ab0ee02bbccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b9d5bf4b49fac93643ab0ee02bbccd">&#9670;&nbsp;</a></span>time_register_rtc_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a> time_register_rtc_manager </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>rtc_manager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers the function to call the RTC manager. </p>
<p>Registers the function to call the RTC manager. This function will be called at each tick of the RTC timer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rtc_manager</td><td>The rtc manager routine to call every RTC tick.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The success state or the error code.<ul>
<li>OS_NO_ERR is returned if no error is encountered.</li>
<li>OS_ERR_NULL_POINTER if the scheduler routine pointer is NULL. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="time__mgt_8c_source.html#l00371">371</a> of file <a class="el" href="time__mgt_8c_source.html">time_mgt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#ifdef ARCH_64_BITS</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_TIME_REG_RTC_MGT, 2,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                       (uintptr_t)rtc_manager &amp; 0xFFFFFFF,</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                       (uintptr_t)rtc_manager &gt;&gt; 32);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_TIME_REG_RTC_MGT, 2,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                       (uintptr_t)rtc_manager &amp; 0xFFFFFFF,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                       (uintptr_t)0);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span>(rtc_manager == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a8177a51adc2ead06e58edc0efd4ec20e">OS_ERR_NULL_POINTER</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="kernel__output_8h.html#ad5a087734220dd655d1effaa240275fa">KERNEL_DEBUG</a>(<a class="code" href="config_8h.html#a479e37962e8b24b96a6b3a88ddeffc71">TIME_MGT_DEBUG_ENABLED</a>,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                 <a class="code" href="time__mgt_8c.html#a14ded244c47bbba850a8a4be6d16c7e3">MODULE_NAME</a>,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                 <span class="stringliteral">&quot;Registered RTC routine at 0x%p&quot;</span>, rtc_manager);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="time__mgt_8c.html#abe2dd32d5f666a94bd1d1c10551099c0">rtc_int_manager</a> = rtc_manager;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a188fd154c7a72b48eaeac6b03930c186">OS_NO_ERR</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="ttc" id="atime__mgt_8c_html_abe2dd32d5f666a94bd1d1c10551099c0"><div class="ttname"><a href="time__mgt_8c.html#abe2dd32d5f666a94bd1d1c10551099c0">rtc_int_manager</a></div><div class="ttdeci">void(* rtc_int_manager)(void)</div><div class="ttdoc">RTC interrupt manager.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00115">time_mgt.c:115</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="time__mgt_8h_a61b9d5bf4b49fac93643ab0ee02bbccd_icgraph.png" border="0" usemap="#atime__mgt_8h_a61b9d5bf4b49fac93643ab0ee02bbccd_icgraph" alt=""/></div>
<map name="atime__mgt_8h_a61b9d5bf4b49fac93643ab0ee02bbccd_icgraph" id="atime__mgt_8h_a61b9d5bf4b49fac93643ab0ee02bbccd_icgraph">
<area shape="rect" title="Registers the function to call the RTC manager." alt="" coords="247,5,445,32"/>
<area shape="rect" href="rtc_8h.html#acf9024748b942a7ae375cf75951afa9c" title="Initializes the RTC settings and interrupt management." alt="" coords="132,5,199,32"/>
<area shape="rect" href="kickstart_8c.html#aa7661ce522787aa8be0fa9c027f8f557" title="Main boot sequence, C kernel entry point." alt="" coords="5,5,84,32"/>
</map>
</div>

</div>
</div>
<a id="a945a623ee70ed374e56b628ed6b9f7dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a945a623ee70ed374e56b628ed6b9f7dc">&#9670;&nbsp;</a></span>time_register_scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0">OS_RETURN_E</a> time_register_scheduler </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="structkernel__thread__t.html">kernel_thread_t</a> *)&#160;</td>
          <td class="paramname"><em>scheduler_call</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers the function to call the system's scheduler. </p>
<p>Registers the function to call the system's scheduler. This function will be called at each tick of the main timer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">scheduler_call</td><td>The scheduling routine to call every tick.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The success state or the error code.<ul>
<li>OS_NO_ERR is returned if no error is encountered.</li>
<li>OS_ERR_NULL_POINTER if the scheduler routine pointer is NULL. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="time__mgt_8c_source.html#l00344">344</a> of file <a class="el" href="time__mgt_8c_source.html">time_mgt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#ifdef ARCH_64_BITS</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_TIME_REG_SCHED, 2,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                       (uintptr_t)scheduler_call &amp; 0xFFFFFFFF,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                       (uintptr_t)scheduler_call &gt;&gt; 32);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_TIME_REG_SCHED, 2,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                       (uintptr_t)scheduler_call &amp; 0xFFFFFFFF,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                       (uintptr_t)0);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span>(scheduler_call == <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a8177a51adc2ead06e58edc0efd4ec20e">OS_ERR_NULL_POINTER</a>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="kernel__output_8h.html#ad5a087734220dd655d1effaa240275fa">KERNEL_DEBUG</a>(<a class="code" href="config_8h.html#a479e37962e8b24b96a6b3a88ddeffc71">TIME_MGT_DEBUG_ENABLED</a>,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                 <a class="code" href="time__mgt_8c.html#a14ded244c47bbba850a8a4be6d16c7e3">MODULE_NAME</a>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                 <span class="stringliteral">&quot;Registered scheduler routine at 0x%p&quot;</span>, scheduler_call);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="time__mgt_8c.html#a28b7c521e7f93ebefc7dd9622dc5a38c">schedule_routine</a> = scheduler_call;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="kerror_8h.html#a51557cb52bbb9ee9d55aab5b9b16c3d0a188fd154c7a72b48eaeac6b03930c186">OS_NO_ERR</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
<div class="ttc" id="atime__mgt_8c_html_a28b7c521e7f93ebefc7dd9622dc5a38c"><div class="ttname"><a href="time__mgt_8c.html#a28b7c521e7f93ebefc7dd9622dc5a38c">schedule_routine</a></div><div class="ttdeci">void(* schedule_routine)(kernel_thread_t *)</div><div class="ttdoc">Stores the routine to call the scheduler.</div><div class="ttdef"><b>Definition:</b> <a href="time__mgt_8c_source.html#l00112">time_mgt.c:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa47f159ce8e7bdb7ed6678e3b9d76172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47f159ce8e7bdb7ed6678e3b9d76172">&#9670;&nbsp;</a></span>time_wait_no_sched()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void time_wait_no_sched </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait for ms nanoseconds. </p>
<p>Performs a wait for ms nanoseconds based on the kernel's main timer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ns</td><td>The time to wait in nanoseconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function must only be called before the scheduler is initialized. Otherwise the function will immediatly return. </dd></dl>

<p class="definition">Definition at line <a class="el" href="time__mgt_8c_source.html#l00326">326</a> of file <a class="el" href="time__mgt_8c_source.html">time_mgt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_TIME_WAIT_NOSCHED_START, 2,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                       (<a class="code" href="stdint_8h.html#a324c5d28c0d82f502a234ab99efac87a">uint32_t</a>)ns,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                       (<a class="code" href="stdint_8h.html#a324c5d28c0d82f502a234ab99efac87a">uint32_t</a>)(ns &gt;&gt; 32));</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="time__mgt_8c.html#a28b7c521e7f93ebefc7dd9622dc5a38c">schedule_routine</a> != <a class="code" href="stddef_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="time__mgt_8c.html#a9f0cde210aef708f2d76688cbea7a36f">active_wait</a> = ns;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="time__mgt_8c.html#a9f0cde210aef708f2d76688cbea7a36f">active_wait</a> &gt; 0){}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="tracing_8h.html#a631034fc8d54090aa7f8fca47f5f4d58">KERNEL_TRACE_EVENT</a>(EVENT_KERNEL_TIME_WAIT_NOSCHED_END, 2,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                       (<a class="code" href="stdint_8h.html#a324c5d28c0d82f502a234ab99efac87a">uint32_t</a>)ns,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                       (<a class="code" href="stdint_8h.html#a324c5d28c0d82f502a234ab99efac87a">uint32_t</a>)(ns &gt;&gt; 32));</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
