;-------------------------------------------------------------------------------
;
; File: userinit.s
;
; Author: Alexy Torres Aurora Dugo
;
; Date: 18/10/2024
;
; Version: 1.0
;
; User entry point.
; Stack is initialized.
; BSS is initialized (zeroed).
; Call main
;-------------------------------------------------------------------------------

;-------------------------------------------------------------------------------
; INCLUDES
;-------------------------------------------------------------------------------
; None

;-------------------------------------------------------------------------------
; ARCH
;-------------------------------------------------------------------------------
[bits 32]

;-------------------------------------------------------------------------------
; DEFINES
;-------------------------------------------------------------------------------
; None

;-------------------------------------------------------------------------------
; MACRO DEFINE
;-------------------------------------------------------------------------------
; None

;-------------------------------------------------------------------------------
; EXTERN DATA
;-------------------------------------------------------------------------------
extern main

;-------------------------------------------------------------------------------
; EXTERN FUNCTIONS
;-------------------------------------------------------------------------------
; None

;-------------------------------------------------------------------------------
; EXPORTED FUNCTIONS
;-------------------------------------------------------------------------------
; None

;-------------------------------------------------------------------------------
; EXPORTED DATA
;-------------------------------------------------------------------------------
; None

;-------------------------------------------------------------------------------
; CODE
;-------------------------------------------------------------------------------

section .init
align 4
__user_entry:
    ; TODO: init BSS
    call main

    ; TODO: call exit

;-------------------------------------------------------------------------------
; DATA
;-------------------------------------------------------------------------------

section .data
; None